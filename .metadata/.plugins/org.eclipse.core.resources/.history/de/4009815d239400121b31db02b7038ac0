package tk.sirtwinkles.spicedtea.world.gen.dungeon.carve;

import static tk.sirtwinkles.spicedtea.MathUtils.random;
import static tk.sirtwinkles.spicedtea.world.gen.TileSetProvider.FLOOR;
import tk.sirtwinkles.spicedtea.world.gen.dungeon.Direction;

public class FeatureCorridor extends Feature {
	public static final int WIDTH = 3;

	@Override
	public boolean generate(int x, int y, int[][] data, Direction dir) {
		int mSize = (data.length > data[0].length) ? data.length : data[0].length;
		int length = random.nextInt(mSize);
		switch (dir) {
		case N:
			if (test(x - 1, y, WIDTH + 1, length, data, )) {
				fill(x, y, WIDTH, length, data, FLOOR);
				break;
			}
			return false;
		case E:
			if (test(x, y - 1, length, WIDTH + 1, data)) {
				fill(x, y, length, WIDTH, data, FLOOR);
				break;
			}
			return false;
		case S:
			if (test(x - 1, y - length, WIDTH + 1, length, data)) {
				fill(x, y - length, WIDTH, length, data, FLOOR);
				break;
			}
			return false;
		case W:
			if (test(x - length, y - 1, length, WIDTH + 1, data)) {
				fill(x - length, y, length, WIDTH, data, FLOOR);
				break;
			}
			return false;
		}
		return true;
	}
}
