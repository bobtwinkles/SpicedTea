package tk.sirtwinkles.spicedtea.sys.combat;

import java.util.LinkedList;

import tk.sirtwinkles.spicedtea.GameSpicedTea;
import tk.sirtwinkles.spicedtea.components.XPComponent;
import tk.sirtwinkles.spicedtea.state.PlayingState;
import tk.sirtwinkles.spicedtea.sys.System;

public class CombatSystem extends System {
	private LinkedList<Attack> attacks;

	public CombatSystem() {
		super("combat");
		this.attacks = new LinkedList<Attack>();
	}

	@Override
	public void run(GameSpicedTea game, PlayingState play) {
		for (Attack attack : attacks) {
			final int weaponPower = 10; // Arbitrary, should be from weapons, but timez =(
			final XPComponent instigatorXP = (XPComponent)(attack.instigator.getComponent("xp"));
			final XPComponent targetXP = (XPComponent) attack.target.getComponent("xp");
			final double damangeFactor = (Math.sin((Math.PI * instigatorXP.level) / (XPComponent.MAX_LEVEL * 2)) + 1 - (targetXP.level / (float)XPComponent.MAX_LEVEL)) / 2;
		}
	}

	public void queueAttack(Attack attack) {
		this.attacks.addLast(attack);
	}
}